# Draftify 웹 UI 설계

**버전**: 1.5
**최종 갱신**: 2026-01-04
**관련 문서**: prd.md, workflow.md, design-system.md, user-flow.md

---

## 목차

1. [개요](#1-개요)
2. [사용자 시나리오](#2-사용자-시나리오)
3. [화면 구성](#3-화면-구성)
4. [화면 전환 흐름](#4-화면-전환-흐름)
5. [UI 상태 표시](#5-ui-상태-표시)
6. [에러 메시지](#6-에러-메시지)
7. [제외 범위](#7-제외-범위)

---

## 1. 개요

### 1.1 목적

Draftify 웹 UI는 **기획자가 목업/MVP 사이트를 입력하고 기획서(PPT/HTML)를 자동 생성받는** 사용자 인터페이스를 제공한다.

주 사용자인 기획자는 CLI를 사용하지 않으므로, **웹 UI가 서비스의 유일한 진입점**이다.

### 1.2 설계 원칙

1. **단순성**: `업로드 → 생성 → 결과 확인` 3단계 플로우
2. **투명성**: Phase별 진행 상태 실시간 표시
3. **내부 도구**: 인증/권한 관리 없음 (인프라 레벨 접근 통제 전제)
4. **부분 성공 허용**: 일부 Phase 실패해도 결과 제공

---

## 2. 사용자 시나리오

### 2.1 기본 시나리오 (자동 크롤링 모드)

```
1. 기획자가 MVP URL 입력 (예: http://localhost:3000)
2. [선택] PRD, SDD 파일 업로드
3. 옵션 설정 (max-pages: 50, max-depth: 5)
4. "생성 시작" 버튼 클릭
5. 진행 상태 화면으로 전환 (35분 이내 완료 예상)
   - Phase 1: 크롤링 중... (12/50 페이지)
   - Phase 2: 분석 중...
   - Phase 3-1: 정책/용어 생성 중...
   - Phase 3-2: 화면/프로세스 생성 중...
   - Phase 3.5: 품질 검증 중...
   - Phase 4: PPT 생성 중...
6. 완료 시 결과 화면으로 이동
7. PPT 다운로드 또는 HTML 미리보기
```

### 2.2 Record 모드 시나리오 (State 기반 SPA)

```
1. 기획자가 URL 입력 + "Record 모드" 체크
2. "생성 시작" 버튼 클릭
3. Chrome 브라우저 팝업 열림 (MCP 연동)
4. 기획자가 수동으로 화면 탐색
   - 각 화면에서 "캡처" 버튼 클릭
   - 사용자 동작 로깅 (클릭, 입력 등)
5. "완료" 버튼 클릭 → Phase 2로 진행
6. 이후 자동 모드와 동일
```

---

## 3. 화면 구성

### 3.1 업로드 화면 (Upload Screen)

#### 레이아웃

```
┌──────────────────────────────────────────────────────┐
│  Draftify - 기획서 자동 생성                           │
├──────────────────────────────────────────────────────┤
│                                                        │
│  📌 필수 입력                                           │
│  ┌────────────────────────────────────────────┐      │
│  │ MVP URL (필수)                              │      │
│  │ http://localhost:3000                       │      │
│  └────────────────────────────────────────────┘      │
│                                                        │
│  📎 선택 입력                                           │
│  ┌────────────────────────────────────────────┐      │
│  │ PRD 파일 (.md)         [파일 선택]          │      │
│  │ SDD 파일 (.md)         [파일 선택]          │      │
│  │ 스크린샷 (.zip)        [파일 선택]          │      │
│  │ 소스코드 디렉토리       [폴더 선택]          │      │
│  │ 수동 URL 목록 (.txt)   [파일 선택]          │      │
│  └────────────────────────────────────────────┘      │
│                                                        │
│  ⚙️ 옵션                                               │
│  ┌────────────────────────────────────────────┐      │
│  │ ☐ Record 모드 (State 기반 SPA용)            │      │
│  │ 최대 페이지:  [50    ▼]                     │      │
│  │ 최대 깊이:    [5     ▼]                     │      │
│  │ 프로젝트명:   [자동 추론 또는 입력]          │      │
│  └────────────────────────────────────────────┘      │
│                                                        │
│            [    생성 시작    ]                         │
│                                                        │
└──────────────────────────────────────────────────────┘
```

#### 입력 필드

| 필드 | 타입 | 필수 | 설명 | 제약조건 |
|------|------|------|------|----------|
| MVP URL | text | ✅ | 크롤링 대상 URL | `http://` 또는 `https://` |
| PRD 파일 | file | ❌ | Markdown 기반 PRD | .md, 최대 10MB |
| SDD 파일 | file | ❌ | Markdown 기반 SDD | .md, 최대 10MB |
| 스크린샷 | file | ❌ | 압축 파일 | .zip, 최대 100MB |
| 소스코드 디렉토리 | folder | ❌ | 로컬 Git 리포지토리 | - |
| 수동 URL 목록 | file | ❌ | 라인별 URL 리스트 | .txt, 최대 1MB |
| Record 모드 | checkbox | ❌ | SPA 수동 캡처 모드 | - |
| 최대 페이지 | number | ❌ | 기본값: 50 | 1-100 |
| 최대 깊이 | number | ❌ | 기본값: 5 | 1-10 |
| 프로젝트명 | text | ❌ | URL/문서에서 자동 추론 | 영문, 숫자, 하이픈 |

---

### 3.2 진행 상태 화면 (Progress Screen)

#### 레이아웃

```
┌──────────────────────────────────────────────────────┐
│  생성 중... (예상 35분 이내)                            │
├──────────────────────────────────────────────────────┤
│                                                        │
│  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 42%          │
│                                                        │
│  ✅ Phase 1: 크롤링 완료 (50/50 페이지)                │
│  ✅ Phase 2: 분석 완료                                 │
│  🔄 Phase 3-1: 정책/용어 생성 중...                    │
│  ⏸️  Phase 3-2: 대기 중                                │
│  ⏸️  Phase 3.5: 대기 중                                │
│  ⏸️  Phase 4: 대기 중                                  │
│                                                        │
│  📊 상세 로그                                          │
│  ┌────────────────────────────────────────────┐      │
│  │ [12:34:56] Phase 1 시작                     │      │
│  │ [12:35:23] 페이지 발견: /home               │      │
│  │ [12:35:45] 스크린샷 캡처: screen-001.png    │      │
│  │ [12:59:12] Phase 1 완료 (50 페이지)         │      │
│  │ ...                                          │      │
│  └────────────────────────────────────────────┘      │
│                                                        │
│            [    중단    ]                              │
│                                                        │
└──────────────────────────────────────────────────────┘
```

#### 표시 정보

- **전체 진행률**: 퍼센트 바
- **Phase별 상태**: 아이콘 + 텍스트
- **상세 로그**: 타임스탬프 + 메시지 (스크롤 가능)
- **중단 버튼**: 진행 중 취소 가능

---

### 3.3 결과 화면 (Result Screen)

#### 레이아웃 (성공)

```
┌──────────────────────────────────────────────────────┐
│  ✅ 기획서 생성 완료!                                   │
├──────────────────────────────────────────────────────┤
│                                                        │
│  📄 생성된 기획서                                       │
│  ┌────────────────────────────────────────────┐      │
│  │ 프로젝트: todo-app                          │      │
│  │ 생성일시: 2025-12-28 13:30:45               │      │
│  │ 소요시간: 28분 12초                          │      │
│  │                                              │      │
│  │ 📊 통계                                      │      │
│  │ - 크롤링: 50 페이지                          │      │
│  │ - 정책: 12개 (POL-AUTH-001 ~ POL-UI-003)    │      │
│  │ - 화면: 8개 (SCR-001 ~ SCR-008)             │      │
│  │ - 용어: 15개                                 │      │
│  │                                              │      │
│  │ ⚠️  검증 경고 2건                            │      │
│  │ - POL-AUTH-005 참조 누락                    │      │
│  │ - 이미지 링크 깨짐                           │      │
│  └────────────────────────────────────────────┘      │
│                                                        │
│  💾 다운로드                                           │
│  [  <project>-draft-V{version}.pptx (2.3 MB)  ]                      │
│  [  final-draft.html            ]                      │
│  [  전체 파일 (.zip)            ]                      │
│                                                        │
│  👁️  미리보기                                          │
│  ┌────────────────────────────────────────────┐      │
│  │ [HTML 렌더링 뷰]                             │      │
│  └────────────────────────────────────────────┘      │
│                                                        │
│  📂 상세 파일                                          │
│  - sections/05-glossary.md                            │
│  - sections/06-policy-definition.md                   │
│  - sections/08-screen-definition.md                   │
│  - validation/validation-report.md                    │
│                                                        │
│     [  새 기획서 생성  ]    [  히스토리  ]             │
│                                                        │
└──────────────────────────────────────────────────────┘
```

#### 레이아웃 (부분 실패)

```
┌──────────────────────────────────────────────────────┐
│  ⚠️  기획서 생성 완료 (일부 실패)                        │
├──────────────────────────────────────────────────────┤
│                                                        │
│  ❌ 실패한 Phase                                       │
│  - Phase 3-2: process-generator 타임아웃             │
│  - Phase 4: PPT 생성 실패                            │
│                                                        │
│  ✅ 생성된 항목 (부분 성공)                             │
│  - 정책정의서 (06-policy-definition.md)               │
│  - 용어집 (05-glossary.md)                            │
│  - 화면정의서 (08-screen-definition.md)               │
│                                                        │
│  💾 다운로드                                           │
│  [  부분 결과 (.zip)  ]                                │
│  [  에러 로그          ]                                │
│                                                        │
│     [  재시도  ]    [  새 기획서 생성  ]                │
│                                                        │
└──────────────────────────────────────────────────────┘
```

---

### 3.4 Record 모드 화면

Record 모드 선택 시, **브라우저 내 캡처 UI**를 제공한다.

#### 브라우저 오버레이 UI

```
┌──────────────────────────────────────────────────────┐
│  🔴 Recording... (wordcrack.world)                    │
│  [캡처] [완료] [취소]                                  │
├──────────────────────────────────────────────────────┤
│                                                        │
│  (실제 웹사이트 화면)                                   │
│                                                        │
└──────────────────────────────────────────────────────┘

우측 사이드바:
┌─────────────────────────┐
│ 📸 캡처된 화면 (3)       │
│ ✅ Home                  │
│ ✅ Quiz                  │
│ ✅ Result                │
│                          │
│ 🎬 사용자 동작 로그      │
│ - click: 시작하기 버튼   │
│ - input: 답변 입력       │
│ - click: 제출            │
└─────────────────────────┘
```

#### 인터랙션

1. 기획자가 화면을 수동 탐색
2. 각 화면에서 "캡처" 버튼 클릭 → 화면 이름 입력 → 스크린샷 저장
3. 클릭/입력 등 동작 자동 로깅
4. "완료" 버튼 → Phase 2로 진행

---

## 4. 화면 전환 흐름

```
┌─────────────┐     ┌─────────────┐     ┌─────────────┐
│   업로드     │────▶│  진행 상태   │────▶│    결과     │
│   화면      │     │    화면     │     │    화면     │
└─────────────┘     └─────────────┘     └─────────────┘
       │                  │                    │
       │                  │ [중단]             │
       │                  ▼                    │
       │            ┌─────────────┐           │
       │            │  취소 확인   │           │
       │            │   다이얼로그  │           │
       │            └─────────────┘           │
       │                                       │
       ◀───────────────────────────────────────┘
                   [새 기획서 생성]
```

### 전환 조건

| From | To | 조건 |
|------|-----|------|
| 업로드 | 진행 상태 | "생성 시작" 클릭 + 유효성 검증 통과 |
| 진행 상태 | 결과 | 모든 Phase 완료 (성공/실패) |
| 진행 상태 | 업로드 | "중단" 후 확인 |
| 결과 | 업로드 | "새 기획서 생성" 클릭 |

---

## 5. UI 상태 표시

### 5.1 Phase 상태 아이콘

| 아이콘 | 상태 | 설명 |
|--------|------|------|
| ⏸️ | pending | 아직 시작 안 함 |
| 🔄 | in_progress | 현재 실행 중 |
| ✅ | completed | 성공적으로 완료 |
| ⚠️ | warning | 완료했으나 경고 있음 |
| ❌ | failed | 실패 (부분 성공으로 계속) |

### 5.2 Phase별 UI 텍스트

| Phase | 진행 중 | 완료 |
|-------|---------|------|
| 1 | 크롤링 중... (N/M 페이지) | 크롤링 완료 (N 페이지) |
| 2 | 분석 중... | 분석 완료 |
| 3-1 | 정책/용어 생성 중... | 정책/용어 생성 완료 |
| 3-2 | 화면/프로세스 생성 중... | 화면/프로세스 생성 완료 |
| 3.5 | 품질 검증 중... | 품질 검증 완료 (PASS/FAIL) |
| 4 | PPT 생성 중... | PPT 생성 완료 |

### 5.3 로그 메시지 형식

```
[HH:MM:SS] {메시지}
```

**예시**:
```
[12:34:56] Phase 1 시작
[12:35:23] 페이지 발견: /home
[12:35:45] 스크린샷 캡처: screen-001.png
[12:59:12] Phase 1 완료 (50 페이지)
```

---

## 6. 에러 메시지

### 6.1 입력 검증 에러

| 상황 | 메시지 |
|------|--------|
| URL 미입력 | URL을 입력해주세요. |
| URL 형식 오류 | URL 형식이 올바르지 않습니다. (예: http://localhost:3000) |
| 파일 형식 오류 | 지원하지 않는 파일 형식입니다. (.md 파일만 허용) |
| 파일 크기 초과 | 파일 크기가 너무 큽니다. (최대 10MB) |
| 최대 페이지 범위 | 최대 페이지는 1-100 사이여야 합니다. |

### 6.2 Phase 실패 에러

| 상황 | 메시지 | 사용자 조치 |
|------|--------|------------|
| 크롤링 실패 | URL에 접근할 수 없습니다. | URL 확인, Record 모드 시도 |
| 분석 실패 | 분석 데이터를 생성할 수 없습니다. | 입력 파일 확인 |
| 에이전트 타임아웃 | {에이전트} 시간 초과 | 재시도 또는 부분 결과 사용 |
| PPT 생성 실패 | PPT 변환에 실패했습니다. | HTML 버전 다운로드 |

### 6.3 전체 실패

```
❌ 생성 실패: {원인}

제안:
- URL이 접근 가능한지 확인하세요.
- Record 모드로 다시 시도해보세요.
- 문제가 지속되면 관리자에게 문의하세요.
```

### 6.4 타임아웃

```
⏱️ 타임아웃: 35분 초과

생성된 항목까지 결과를 제공합니다.
부분 결과를 다운로드하거나, 재시도할 수 있습니다.
```

---

## 7. 제외 범위

다음 기능은 현재 설계 범위에서 **제외**됩니다:

| 기능 | 제외 사유 |
|------|----------|
| 사용자 인증/권한 | 내부 도구, 인프라 레벨 접근 통제 |
| 협업 기능 | MVP 범위 외 |
| 버전 관리 | 결과물 수동 관리 |
| 기획서 에디터 | 결과는 다운로드 후 수정 |
| 다국어 지원 | 내부 도구 (한국어만) |

---

## 변경 이력

| 버전 | 날짜 | 변경 내용 |
|------|------|----------|
| 1.4 | 2025-12-29 | 문서 정리: 기술 스택, API 명세, 구현 우선순위 제거 |
| 1.3 | 2025-12-29 | Phase 3-1 병렬 실행 반영 |
| 1.0 | 2025-12-27 | 초기 작성 |
