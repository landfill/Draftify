# Parallel Agents Safety Protocol (범용 정제본)

## 목적

여러 작업 에이전트(사람·자동화·AI 포함)를 병렬로 운영할 때 발생하는  
**충돌, 중복 수정, 결과 불일치, 전체 실패(Cascade Failure)**를 예방하기 위한
범용 운영 원칙과 실행 가이드다.

특정 도구, 언어, 플랫폼에 종속되지 않으며  
**병렬 작업 구조 전반에 적용 가능**하도록 설계되었다.

---

## 핵심 전제

- 병렬 작업의 위험은 **에이전트 수**가 아니라 **권한 분리와 결과 수집 방식**에서 발생한다.
- 병렬 실행은 허용하되, **수정 단위·책임·수집 순서**는 반드시 통제해야 한다.
- 최종 의사결정과 반영 권한은 **단일 주체(Main)**에 귀속된다.

---

## CORE RULES (절대 규칙)

1. **병렬 실행과 결과 반영은 분리한다**
2. **하나의 작업 대상은 하나의 에이전트만 책임진다**
3. **결과는 반드시 순차적으로 수집·검증한다**
4. **최종 반영 권한은 단일 책임자만 가진다**
5. **작업 시작 전 상태 점검은 필수다**
6. **실패가 누적되면 자동으로 작업을 중단한다**
7. **에이전트별 작업량 상한을 명확히 둔다**

---

## 안전 메커니즘 1: 작업 단위 분리 (Scope Isolation)

- 작업 대상은 반드시 **명확한 단위**로 쪼갠다
- 동일 단위를 두 개 이상의 에이전트가 동시에 수정하는 것은 금지
- 단위 예시
  - 문서 1개
  - 기능 1개
  - 화면 1개
  - 정책 항목 1개

> 원칙: **1 단위 = 1 에이전트**

---

## 안전 메커니즘 2: 작업량 제한 (Workload Cap)

에이전트는 과도한 작업을 맡을수록 실패 확률이 기하급수적으로 증가한다.

### 일반 권장 기준

- 단일 에이전트 작업 범위는 “한 번에 이해 가능한 크기”로 제한
- 탐색/분석 작업은 결과 요약 중심
- 생성/수정 작업은 명확한 산출물 1~2개 이내

목표는 **완벽함이 아니라 안정적 완수**다.

---

## 안전 메커니즘 3: 출력 전략 명확화

에이전트가 무엇을 반환해야 하는지 사전에 고정한다.

### 직접 수행형
- 에이전트가 결과물을 완성
- 중앙 관리자는 완료 여부와 요약만 확인

### 요약 보고형
- 에이전트는 분석·검토만 수행
- 핵심 판단 근거만 전달

### 전체 결과형
- 복잡한 판단이 필요한 경우에만 제한적으로 사용
- 비용과 리스크가 가장 큼

기본값은 **직접 수행형 또는 요약 보고형**이다.

---

## 안전 메커니즘 4: 순차 수집 원칙

- 병렬 실행 결과를 **동시에 반영하지 않는다**
- 항상 다음 순서를 유지한다

1. 결과 수신
2. 충돌 여부 검증
3. 기준 충족 여부 판단
4. 반영 또는 폐기 결정

> 병렬 실행 ≠ 병렬 반영

---

## 안전 메커니즘 5: Circuit Breaker (연쇄 실패 차단)

- 동일 유형의 작업이 연속 실패하면 자동 중단
- 일정 시간 동안 동일 방식 재시도 금지
- 중앙 책임자가 직접 처리하거나 전략을 수정

목적은 **문제 확산 차단**이다.

---

## 안전 메커니즘 6: 중앙 책임자(Main) 모델

중앙 책임자의 역할은 다음으로 한정된다.

- 작업 분해 및 배분
- 충돌 여부 검증
- 결과 채택/폐기 결정
- 최종 반영 및 기록

에이전트는 **결정권이 없다**.

---

## 운영 워크플로우 (범용)

### Phase 0: 사전 점검
- 현재 진행 중 작업 여부 확인
- 중단 조건(Circuit 상태) 확인
- 기준 규칙 최신 상태 확인

### Phase 1: 작업 검증
- 작업 단위 충돌 여부 점검
- 작업량 상한 초과 여부 확인
- 역할·책임 명확화

### Phase 2: 병렬 실행
- 각 에이전트는 자신의 범위만 수행
- 상호 참조·간섭 금지

### Phase 3: 결과 수집 및 반영
- 순차 수집
- 기준 충족 시 반영
- 실패 시 기록 후 대체 처리

---

## Red Flags (즉시 중단 신호)

- “한 번에 다 돌리자”
- “이 정도 겹침은 괜찮겠지”
- “사전 점검은 생략해도 돼”
- “에이전트가 알아서 판단하겠지”
- “전체 결과를 다 받아보자”

이 사고 패턴은 대부분 실패로 끝난다.

---

## 이 프로토콜이 보장하는 것

1. 작업 충돌 예방
2. 병렬 실행 안정성 확보
3. 결과 일관성 유지
4. 연쇄 실패 차단
5. 책임 구조 명확화
6. 장시간 운영 가능성 확보

---

## 결론

병렬 작업의 핵심은 **속도**가 아니라 **통제**다.

이 프로토콜은  
- AI 에이전트
- 자동화 워크플로
- 다수 작업자 협업
- 대규모 병렬 처리

모든 환경에서 **안전한 병렬 실행의 최소 조건**으로 사용할 수 있다.
