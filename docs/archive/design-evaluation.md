# Draftify 설계 문서 구조화/완전성 평가

작성일: 2026-01-02
작성 목적: 설계 문서 구조화 및 완전성 평가, 병렬 에이전트 안전 기준(ref.md) 점검

---

## 1. 검토 범위

- CLAUDE.md
- docs/requirements/prd.md
- docs/design/*.md
- docs/design/agents/*.md
- docs/archive/ref.md

---

## 2. 구조화 평가

### 2.1 강점

1) **문서 분할 구조가 명확함**
- design-index.md를 중심으로 아키텍처/워크플로우/에러핸들링/출력 규격/에이전트 프롬프트가 모듈화됨.
- 설계 범위가 “Phase 1-4”, “에이전트 역할”, “스키마/로그/설정”으로 분리되어 탐색성이 높음.

2) **데이터 흐름과 책임 분리가 구체적임**
- workflow.md에서 Phase별 입력/출력과 의존성 그래프가 명확.
- agents/*.md에서 파일 단위 출력 책임이 분리됨.

3) **Single Source of Truth 유지 시도**
- config.md가 타임아웃/재시도/최소 성공 기준을 일원화.
- schemas.md가 crawling-result/analyzed-structure 스키마를 제공.

4) **운영 관점 문서화**
- error-handling.md의 재시도/회로 차단(Circuit Breaker)
- logging.md의 로그 레벨/포맷/파일 경로
- record-mode-design.md의 반자동 기록 설계

### 2.2 구조적 개선 필요 지점

1) **레이어 정의의 표현 불일치**
- CLAUDE.md에 “4-layer”라고 표기되어 있으나 실제 나열은 5계층(사용자/스킬/오케스트레이션/실행/데이터)임.
- architecture.md는 5계층으로 명시. 용어 정리 필요.

2) **출력 섹션 정의 요약의 불일치**
- design-index.md는 “10개 표준 섹션” 설명에 ‘서비스 개요’와 ‘API 명세’를 포함한 표현이 보이는데, auto-draft-guideline.md의 실제 섹션 구성은 01~10(cover~eod)이며 서비스 개요/ API 명세는 명시되지 않음.
- 요약 문구와 실제 규격 간의 차이를 해소해야 혼선이 줄어듦.

3) **문서 관계의 단일 진실 소스 범위 확장 필요**
- config.md는 SSOT를 선언하지만, UI 디자인의 “예상 처리 시간(35분)”은 PRD(30분)와 config(25분)와 불일치.
- 시간 관련 수치(타임아웃/예상 소요)는 SSOT 기준으로 통일 필요.

---

## 3. 완전성 평가

### 3.1 요구사항 대비 커버리지

- PRD의 핵심 요구(입력 유형, 자동 크롤링/Record 모드, PPT/HTML 출력, 부분 성공 허용, 30분 내 완료)는 설계 문서에서 대부분 직접 다룸.
- 구현 체크리스트와 에이전트 프롬프트가 결합되어 실행 가능한 수준의 상세도를 가짐.

### 3.2 핵심 설계 구성요소 커버리지

- **아키텍처**: architecture.md
- **워크플로우**: workflow.md
- **크롤링**: crawling-strategy.md + record-mode-design.md
- **데이터 스키마**: schemas.md
- **에러/복구**: error-handling.md
- **로깅**: logging.md
- **프로젝트 관리/출력 구조**: project-management.md
- **UI 설계**: ui-design.md
- **에이전트 프롬프트**: agents/*.md

=> “구현 가능성” 관점에서의 문서 완전성은 높은 편.

### 3.3 완전성 보완 필요 지점

1) **운영/보안/데이터 보존 정책 부재**
- PRD에서 인증/권한은 제외하나, 산출물/로그/스크린샷의 보존 기간/삭제 정책이 설계에 없음.
- 로컬 파일 처리(업로드 파일/스크린샷/코드) 보안 고려가 누락.

2) **품질 목표 및 검증 기준의 상위 수준 정의 부족**
- validation 기준은 있으나 “기획서 품질”의 상위 KPI(예: 정책/화면 커버리지 비율, 누락 허용 기준 등)는 정의되지 않음.
- PRD의 “초안 품질” 기대 수준이 설계에서 명확히 정량화되지 않음.

3) **UI/API 계약 수준의 상세 부족**
- ui-design.md는 화면/플로우 중심으로 잘 정리되어 있으나, API 요청/응답 스키마, 상태 업데이트 페이로드 정의는 설계에 없음.
- 구현 체크리스트에만 존재하는 항목은 명세화가 필요.

4) **PPT 생성부 세부 설계는 별도 스킬 영역으로 분리됨**
- 현 문서 범위에서 Phase 4는 스킬 레벨 개요만 있고, 출력 포맷/레이아웃/템플릿 적용 규칙은 없음.
- 스코프 분리는 타당하나, 전체 완전성 관점에서는 별도 설계 문서 링크가 필요.

---

## 4. ref.md 기준 체크 (Parallel Agents Safety Protocol)

### 4.1 CORE RULES 점검

1) 병렬 실행과 결과 반영 분리
- **준수**: workflow.md 4.4 “순차 수집 원칙” 명시.

2) 하나의 작업 대상은 하나의 에이전트만 책임
- **준수**: workflow.md “파일 소유권/ID 생성 소유권” 명시.

3) 결과는 순차적으로 수집·검증
- **준수**: workflow.md 4.4의 수집 순서 규정.

4) 최종 반영 권한은 단일 주체
- **준수**: orchestrator가 결과 선택/수집 주체로 정의됨.

5) 작업 시작 전 상태 점검 필수
- **부분 준수**: 문서 전반에 사전 점검(Phase 0) 절차가 명시적이지 않음.
- 개선 필요: 기존 outputs 디렉토리 충돌, 복구 파일 존재 여부, 진행 중 세션 검사 등 사전 점검 절차 명문화 필요.

6) 실패 누적 시 자동 중단
- **준수**: error-handling.md Circuit Breaker 규정.

7) 작업량 상한 명확화
- **부분 준수**: 크롤링 페이지 수/깊이, 타임아웃 등의 상한은 있으나,
  에이전트별 “작업량 상한(예: 최대 화면 수/정책 수/토큰 제한 등)”은 명시되지 않음.

### 4.2 안전 메커니즘 매핑

- Scope Isolation: 파일 단위 소유권 규정으로 충족.
- Workload Cap: 페이지 수/깊이/타임아웃은 존재하나, 문서 생성량 상한은 부족.
- Output Strategy: 각 에이전트는 직접 수행형(산출물 생성)으로 통일되어 명확.
- 순차 수집: workflow.md에 명시.
- Circuit Breaker: error-handling.md에 명시.
- 중앙 책임자 모델: orchestrator 역할로 충족.

---

## 5. 종합 평가 요약

- **구조화**: 높은 수준의 모듈화와 탐색성 확보. SSOT 전략도 비교적 잘 유지됨.
- **완전성**: 구현 수준의 상세도는 충분하나, 운영/보안/품질 KPI/CLI·UI API 계약의 명세가 부족.
- **ref.md 기준**: 병렬 실행 안전성 핵심 규칙 대부분 준수하나, Phase 0 사전 점검 및 작업량 상한 정의는 보완 필요.

---

## 6. 권장 보완 항목 (우선순위)

1) **Phase 0 사전 점검 절차 문서화**
- 기존 outputs 충돌, 진행 중 세션, 복구 파일 감지 등

2) **작업량 상한 정의 추가**
- 화면/정책/프로세스 개수 상한, 토큰/시간 예산 기준

3) **시간 관련 기준 통일**
- PRD(30분), config(25분), UI(35분) 간 기준 정합화

4) **UI/API 계약 명세 추가**
- 작업 생성/상태 조회/에러 응답 JSON 스키마

5) **운영/보존 정책 명시**
- 결과물/로그/스크린샷 보존 기간, 정리 전략

