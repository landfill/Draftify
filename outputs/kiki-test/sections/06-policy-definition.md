# 정책 정의 (Policy Definition)

본 문서는 KIKI Shop 서비스의 공통 정책을 정의한다.
화면과 무관한 판단 기준을 이 섹션에 집중하며, 개발자가 이 섹션만 보고 공통 로직을 구현할 수 있어야 한다.

---

## 1. 인증/권한 정책 (AUTH)

### POL-AUTH-001: 로그인 실패 제한
- **설명**: 연속 로그인 실패 시 계정 보호
- **규칙**:
  - 5회 연속 실패 시 10분간 로그인 차단
  - 10회 연속 실패 시 계정 잠금 (CS 문의 필요)
- **적용 화면**: SCR-002

### POL-AUTH-002: 비밀번호 정책
- **설명**: 비밀번호 생성 규칙
- **규칙**:
  - 최소 8자 이상
  - 영문, 숫자, 특수문자 중 2종류 이상 포함
  - 연속 3자 이상 동일 문자 금지
- **적용 화면**: SCR-002

### POL-AUTH-003: 세션 만료
- **설명**: 로그인 상태 유지 정책
- **규칙**:
  - 일반 로그인: 24시간
  - "로그인 유지" 선택 시: 30일
  - 비활성 30분 시 자동 로그아웃
- **적용 화면**: 전체

---

## 2. 입력 검증 정책 (VAL)

### POL-VAL-001: 이메일 형식 검증
- **설명**: 이메일 입력 필드 검증 규칙
- **규칙**:
  - RFC 5322 표준 준수
  - 허용 특수문자: `.`, `_`, `-`, `+`
  - 최대 길이: 254자
- **에러 메시지**: "올바른 이메일 형식을 입력해주세요"

### POL-VAL-002: 휴대폰 번호 검증
- **설명**: 휴대폰 번호 입력 필드 검증 규칙
- **규칙**:
  - 형식: 010-XXXX-XXXX 또는 01XXXXXXXXX
  - 숫자만 허용 (하이픈 자동 포맷팅)
- **에러 메시지**: "올바른 휴대폰 번호를 입력해주세요"

### POL-VAL-003: 주소 검증
- **설명**: 배송지 주소 검증 규칙
- **규칙**:
  - 우편번호 API 연동 필수
  - 상세주소 최소 5자 이상
- **적용 화면**: SCR-006

---

## 3. 비즈니스 정책 (BIZ)

### POL-BIZ-001: 무료 배송 기준
- **설명**: 배송비 면제 조건
- **규칙**:
  - 주문 금액 50,000원 이상: 무료 배송
  - 50,000원 미만: 배송비 3,000원
  - 도서산간 지역: 추가 3,000원
- **적용 화면**: SCR-005, SCR-006

### POL-BIZ-002: 적립금 정책
- **설명**: 포인트 적립 및 사용 규칙
- **규칙**:
  - 적립: 결제 금액의 1% (배송비 제외)
  - 사용: 최소 1,000원 이상 보유 시 사용 가능
  - 사용 한도: 주문 금액의 최대 10%
  - 유효기간: 적립일로부터 1년
- **적용 화면**: SCR-006, SCR-008

### POL-BIZ-003: 쿠폰 사용 정책
- **설명**: 할인 쿠폰 적용 규칙
- **규칙**:
  - 1회 주문 당 1개 쿠폰만 사용 가능
  - 적립금과 중복 사용 가능
  - 최소 주문 금액 조건 충족 필요
- **적용 화면**: SCR-006

### POL-BIZ-004: 재고 차감 시점
- **설명**: 재고 관리 정책
- **규칙**:
  - 장바구니 담기: 재고 차감 없음
  - 결제 완료: 즉시 재고 차감
  - 주문 취소: 재고 복구
- **적용 화면**: SCR-004, SCR-005, SCR-006

---

## 4. 결제 정책 (PAY)

### POL-PAY-001: 주문 취소 정책
- **설명**: 주문 취소 가능 조건
- **규칙**:
  - 결제 후 30분 이내: 즉시 취소 가능
  - 배송준비중: CS 문의 통해 취소
  - 배송중/배송완료: 취소 불가 (반품 절차 진행)
- **적용 화면**: SCR-009

### POL-PAY-002: 환불 정책
- **설명**: 환불 처리 규칙
- **규칙**:
  - 카드 결제: 취소 후 3-5 영업일 내 환불
  - 가상계좌: 환불 계좌 입력 후 1-2 영업일 내 환불
  - 적립금: 즉시 복구
- **적용 화면**: SCR-009

### POL-PAY-003: 결제 수단
- **설명**: 지원 결제 방법
- **규칙**:
  - 신용/체크카드 (국내 전 카드사)
  - 가상계좌 (24시간 내 입금)
  - 카카오페이, 네이버페이, 토스
  - 휴대폰 결제 (월 30만원 한도)
- **적용 화면**: SCR-006

---

## 5. 에러 처리 정책 (ERR)

### POL-ERR-001: 결제 실패 처리
- **설명**: 결제 오류 시 대응 방안
- **규칙**:
  - 카드 한도 초과: "카드 한도를 확인해주세요" 메시지 표시
  - 네트워크 오류: 자동 재시도 (최대 3회)
  - PG 오류: "잠시 후 다시 시도해주세요" 메시지 표시
- **적용 화면**: SCR-006

### POL-ERR-002: 품절 처리
- **설명**: 품절 상품 처리 방안
- **규칙**:
  - 상품 상세: "품절" 뱃지 표시, 구매 버튼 비활성화
  - 장바구니: 품절 상품 알림, 주문 진행 불가
  - 결제 중 품절: 주문 실패 처리, 전액 환불
- **적용 화면**: SCR-003, SCR-004, SCR-005

---

## 6. 보안 정책 (SEC)

### POL-SEC-001: 개인정보 마스킹
- **설명**: 민감 정보 표시 규칙
- **규칙**:
  - 이메일: user***@domain.com
  - 휴대폰: 010-****-1234
  - 카드번호: ****-****-****-1234
- **적용 화면**: SCR-008, SCR-009

### POL-SEC-002: 결제 비밀번호
- **설명**: 간편결제 인증 규칙
- **규칙**:
  - 6자리 숫자 PIN
  - 3회 실패 시 간편결제 잠금
  - 생체인증(Face ID, 지문) 대체 가능
- **적용 화면**: SCR-006
